function senddet() { window.onscroll = senddet2 } function senddet2() { endTime = (new Date).getTime(); var e = endTime - startTime; if (e > 600) { if (document.body.scrollTop) var t = document.body.scrollTop; else var t = document.documentElement.scrollTop; var n = JSON.stringify({ position: t, timeSpent: e }), o = new XMLHttpRequest; o.open("POST", "http://localhost:8888/scrolldata", !0), o.setRequestHeader("Content-type", "application/json"), o.send(n), o.onreadystatechange = function () { 4 == this.readyState && 200 == this.status && console.log("sending") }, startTime = (new Date).getTime() } } var startTime = (new Date).getTime(), endTime = (new Date).getTime(); window.onscroll = senddet;